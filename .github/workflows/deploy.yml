name: è‡ªåŠ¨éƒ¨ç½²å‰ç«¯é¡¹ç›®åˆ°é˜¿é‡Œäº‘

on:
  push:
    branches:
      - main  # å½“ main åˆ†æ”¯æœ‰å˜åŠ¨æ—¶è§¦å‘

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ› ï¸ ç¬¬ä¸€æ­¥ï¼šæŠŠ GitHub ä¸Šçš„ä»£ç æ‹‰å–åˆ°æœºå™¨äººæœ¬åœ°
        uses: actions/checkout@v3

      - name: ğŸš€ ç¬¬äºŒæ­¥ï¼šé€šè¿‡ SCP å°†æ–‡ä»¶ä¼ è¾“åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨
        uses: appleboy/scp-action@master
        with:
          host: ${{ secrets.SERVER_IP }}
          username: ${{ secrets.SERVER_USER }}
          password: ${{ secrets.SERVER_PASS }}
          source: "*" # ä¼ è¾“å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
          target: "/opt/app/web" # ç›®æ ‡è·¯å¾„ï¼ˆè¦†ç›–æˆ‘ä»¬ä¹‹å‰çš„æ‰‹å·¥éƒ¨ç½²ï¼‰
          strip_components: 0